{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Dell/ShopaT-1/angular-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./auth-login.component\";\nimport * as i4 from \"./auth-logout.component\";\n\nfunction NavComponent_ng_container_17_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-auth-login\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const provider_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"provider\", provider_r4);\n  }\n}\n\nfunction NavComponent_ng_container_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, NavComponent_ng_container_17_ng_container_1_Template, 2, 1, \"ng-container\", 10);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.providers);\n  }\n}\n\nfunction NavComponent_app_auth_logout_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-auth-logout\");\n  }\n}\n\nfunction NavComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"p\");\n    i0.ɵɵtext(2, \"Welcome\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.userInfo == null ? null : ctx_r2.userInfo.userDetails);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.userInfo == null ? null : ctx_r2.userInfo.identityProvider);\n  }\n}\n\nexport class NavComponent {\n  constructor() {\n    this.providers = ['twitter', 'github', 'aad'];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.userInfo = yield _this.getUserInfo();\n    })();\n  }\n\n  getUserInfo() {\n    return _asyncToGenerator(function* () {\n      try {\n        const response = yield fetch('/.auth/me');\n        const payload = yield response.json();\n        const {\n          clientPrincipal\n        } = payload;\n        return clientPrincipal;\n      } catch (error) {\n        console.error('No profile could be found');\n        return undefined;\n      }\n    })();\n  }\n\n}\n\nNavComponent.ɵfac = function NavComponent_Factory(t) {\n  return new (t || NavComponent)();\n};\n\nNavComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NavComponent,\n  selectors: [[\"app-nav\"]],\n  decls: 20,\n  vars: 3,\n  consts: [[1, \"menu\"], [1, \"menu-label\"], [1, \"menu-list\"], [\"routerLink\", \"/home\", \"routerLinkActive\", \"router-link-active\"], [\"routerLink\", \"/products\", \"routerLinkActive\", \"router-link-active\"], [\"routerLink\", \"/discounts\", \"routerLinkActive\", \"router-link-active\"], [1, \"menu\", \"auth\"], [1, \"menu-list\", \"auth\"], [4, \"ngIf\"], [\"class\", \"user\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"provider\"], [1, \"user\"]],\n  template: function NavComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\", 0)(1, \"p\", 1);\n      i0.ɵɵtext(2, \"Menu\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"ul\", 2)(4, \"a\", 3)(5, \"span\");\n      i0.ɵɵtext(6, \"Home\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"a\", 4)(8, \"span\");\n      i0.ɵɵtext(9, \"My List\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"a\", 5)(11, \"span\");\n      i0.ɵɵtext(12, \"My Discounts\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(13, \"nav\", 6)(14, \"p\", 1);\n      i0.ɵɵtext(15, \"Auth\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵtemplate(17, NavComponent_ng_container_17_Template, 2, 1, \"ng-container\", 8);\n      i0.ɵɵtemplate(18, NavComponent_app_auth_logout_18_Template, 1, 0, \"app-auth-logout\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(19, NavComponent_div_19_Template, 7, 2, \"div\", 9);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngIf\", !ctx.userInfo);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.userInfo);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.userInfo);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.RouterLinkWithHref, i2.RouterLinkActive, i3.AuthLoginComponent, i4.AuthLogoutComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;;;;;;;IAwBUA;IACEA;IACFA;;;;;IADkBA;IAAAA;;;;;;IAFpBA;IACEA;IAGFA;;;;;IAHqCA;IAAAA;;;;;;IAIrCA;;;;;;IAGJA,gCAAmC,CAAnC,EAAmC,GAAnC;IACKA;IAAOA;IACVA;IAAGA;IAA2BA;IAC9BA;IAAGA;IAAgCA;;;;;IADhCA;IAAAA;IACAA;IAAAA;;;;AAIT,OAAM,MAAOC,YAAP,CAAmB;EAnCzBC;IAoCE,iBAAY,CAAC,SAAD,EAAY,QAAZ,EAAsB,KAAtB,CAAZ;EAkBD;;EAfOC,QAAQ;IAAA;;IAAA;MACZ,KAAI,CAACC,QAAL,SAAsB,KAAI,CAACC,WAAL,EAAtB;IADY;EAEb;;EAEKA,WAAW;IAAA;MACf,IAAI;QACF,MAAMC,QAAQ,SAASC,KAAK,CAAC,WAAD,CAA5B;QACA,MAAMC,OAAO,SAASF,QAAQ,CAACG,IAAT,EAAtB;QACA,MAAM;UAAEC;QAAF,IAAsBF,OAA5B;QACA,OAAOE,eAAP;MACD,CALD,CAKE,OAAOC,KAAP,EAAc;QACdC,OAAO,CAACD,KAAR,CAAc,2BAAd;QACA,OAAOE,SAAP;MACD;IATc;EAUhB;;AAlBsB;;;mBAAZZ;AAAY;;;QAAZA;EAAYa;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MAhCrBlB,+BAAkB,CAAlB,EAAkB,GAAlB,EAAkB,CAAlB;MACwBA;MAAIA;MAC1BA,8BAAsB,CAAtB,EAAsB,GAAtB,EAAsB,CAAtB,EAAsB,CAAtB,EAAsB,MAAtB;MAEUA;MAAIA;MAEZA,6BAAgE,CAAhE,EAAgE,MAAhE;MACQA;MAAOA;MAEfA,8BAAiE,EAAjE,EAAiE,MAAjE;MACQA;MAAYA;MAIxBA,gCAAuB,EAAvB,EAAuB,GAAvB,EAAuB,CAAvB;MACwBA;MAAIA;MAC1BA;MACEA;MAKAA;MACFA;MAEFA;;;;MARmBA;MAAAA;MAKGA;MAAAA;MAGHA;MAAAA","names":["i0","NavComponent","constructor","ngOnInit","userInfo","getUserInfo","response","fetch","payload","json","clientPrincipal","error","console","undefined","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Dell\\ShopaT-1\\angular-app\\src\\app\\core\\components\\nav.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { UserInfo } from '../model';\r\n\r\n@Component({\r\n  selector: 'app-nav',\r\n  template: `\r\n    <nav class=\"menu\">\r\n      <p class=\"menu-label\">Menu</p>\r\n      <ul class=\"menu-list\">\r\n        <a routerLink=\"/home\" routerLinkActive=\"router-link-active\">\r\n          <span>Home</span>\r\n        </a>\r\n        <a routerLink=\"/products\" routerLinkActive=\"router-link-active\">\r\n          <span>My List</span>\r\n        </a>\r\n        <a routerLink=\"/discounts\" routerLinkActive=\"router-link-active\">\r\n          <span>My Discounts</span>\r\n        </a>\r\n      </ul>\r\n    </nav>\r\n    <nav class=\"menu auth\">\r\n      <p class=\"menu-label\">Auth</p>\r\n      <div class=\"menu-list auth\">\r\n        <ng-container *ngIf=\"!userInfo\">\r\n          <ng-container *ngFor=\"let provider of providers\">\r\n            <app-auth-login [provider]=\"provider\"></app-auth-login>\r\n          </ng-container>\r\n        </ng-container>\r\n        <app-auth-logout *ngIf=\"userInfo\"></app-auth-logout>\r\n      </div>\r\n    </nav>\r\n    <div class=\"user\" *ngIf=\"userInfo\">\r\n      <p>Welcome</p>\r\n      <p>{{ userInfo?.userDetails }}</p>\r\n      <p>{{ userInfo?.identityProvider }}</p>\r\n    </div>\r\n  `,\r\n})\r\nexport class NavComponent implements OnInit {\r\n  providers = ['twitter', 'github', 'aad'];\r\n  userInfo: UserInfo;\r\n\r\n  async ngOnInit() {\r\n    this.userInfo = await this.getUserInfo();\r\n  }\r\n\r\n  async getUserInfo() {\r\n    try {\r\n      const response = await fetch('/.auth/me');\r\n      const payload = await response.json();\r\n      const { clientPrincipal } = payload;\r\n      return clientPrincipal;\r\n    } catch (error) {\r\n      console.error('No profile could be found');\r\n      return undefined;\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}