{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./discount.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"./shared/list-header.component\";\n\nfunction DiscountComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.errorMessage);\n  }\n}\n\nfunction DiscountComponent_div_1_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Loading data ...\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DiscountComponent_div_1_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"div\", 10)(4, \"label\");\n    i0.ɵɵtext(5, \"Store:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"label\");\n    i0.ɵɵtext(9, \"Discount:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"label\");\n    i0.ɵɵtext(13, \"Code:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const discount_r5 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(discount_r5.store);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", discount_r5.percentage, \"%\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(discount_r5.code);\n  }\n}\n\nfunction DiscountComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"app-list-header\", 3);\n    i0.ɵɵlistener(\"refresh\", function DiscountComponent_div_1_Template_app_list_header_refresh_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.getDiscounts());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(2, DiscountComponent_div_1_div_2_Template, 2, 1, \"div\", 4);\n    i0.ɵɵtemplate(3, DiscountComponent_div_1_div_3_Template, 2, 0, \"div\", 4);\n    i0.ɵɵelementStart(4, \"ul\", 5);\n    i0.ɵɵtemplate(5, DiscountComponent_div_1_li_5_Template, 16, 3, \"li\", 6);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const discounts_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"showAdd\", ctx_r0.showAdd);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.errorMessage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(discounts_r1 == null ? null : discounts_r1.length) && !ctx_r0.errorMessage);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", discounts_r1)(\"ngForTrackBy\", ctx_r0.trackByDiscount);\n  }\n}\n\nexport class DiscountComponent {\n  constructor(discountService) {\n    this.discountService = discountService;\n    this.showAdd = false;\n    this.discounts$ = discountService.entities$;\n  }\n\n  ngOnInit() {\n    this.getDiscounts();\n  }\n\n  getDiscounts() {\n    this.errorMessage = undefined;\n    this.discountService.getAll().subscribe(_ => {\n      /*.. do nothing for success.. */\n    }, // (error: any) => (this.errorMessage = error.error.message),\n    error => this.errorMessage = 'Unauthorized');\n  }\n\n  trackByDiscount(index, discount) {\n    return discount.id;\n  }\n\n}\n\nDiscountComponent.ɵfac = function DiscountComponent_Factory(t) {\n  return new (t || DiscountComponent)(i0.ɵɵdirectiveInject(i1.DiscountService));\n};\n\nDiscountComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DiscountComponent,\n  selectors: [[\"app-discount\"]],\n  decls: 3,\n  vars: 3,\n  consts: [[1, \"container\", \"columns\"], [\"class\", \"column is-8\", 4, \"ngIf\"], [1, \"column\", \"is-8\"], [\"title\", \"My Discounts\", 3, \"showAdd\", \"refresh\"], [4, \"ngIf\"], [1, \"list\"], [\"role\", \"presentation\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"role\", \"presentation\"], [1, \"card\"], [1, \"card-content\"], [1, \"content\", \"discount-grid\"]],\n  template: function DiscountComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, DiscountComponent_div_1_Template, 6, 5, \"div\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 1, ctx.discounts$));\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ListHeaderComponent, i2.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;;;;;IAeQA;IAA0BA;IAAkBA;;;;;IAAlBA;IAAAA;;;;;;IAC1BA;IAAiDA;IAAgBA;;;;;;IAE/DA,8BAOC,CAPD,EAOC,KAPD,EAOC,CAPD,EAOC,CAPD,EAOC,KAPD,EAOC,CAPD,EAOC,CAPD,EAOC,KAPD,EAOC,EAPD,EAOC,CAPD,EAOC,OAPD;IAWeA;IAAMA;IAAQA;IAAMA;IAAoBA;IAC/CA;IAAOA;IAASA;IACfA;IAAMA;IAA0BA;IAAQA;IAAOA;IAAKA;IACpDA;IAAMA;IAAmBA;;;;;IAHCA;IAAAA;IAEpBA;IAAAA;IACAA;IAAAA;;;;;;;;IAvBnBA,+BAAiE,CAAjE,EAAiE,iBAAjE,EAAiE,CAAjE;IAGIA;MAAAA;MAAA;MAAA,OAAWA,qCAAX;IAAyB,CAAzB;IAEDA;IACDA;IACAA;IACAA;IACEA;IAmBFA;;;;;;IAxBEA;IAAAA;IAEIA;IAAAA;IACAA;IAAAA;IAMdA;IAAAA,uCAA4B,cAA5B,EAA4BC,sBAA5B;;;;AAoBA,OAAM,MAAOC,iBAAP,CAAwB;EAK5BC,YAAoBC,eAApB,EAAoD;IAAhC;IAHpB,eAAU,KAAV;IAIE,KAAKC,UAAL,GAAkBD,eAAe,CAACE,SAAlC;EACD;;EAEDC,QAAQ;IACN,KAAKC,YAAL;EACD;;EAEDA,YAAY;IACV,KAAKC,YAAL,GAAoBC,SAApB;IACA,KAAKN,eAAL,CAAqBO,MAArB,GAA8BC,SAA9B,CACGC,CAAD,IAAM;MACJ;IACD,CAHH,EAIE;IACCC,KAAD,IAAiB,KAAKL,YAAL,GAAoB,cALvC;EAOD;;EAEDM,eAAe,CAACC,KAAD,EAAgBC,QAAhB,EAAkC;IAC/C,OAAOA,QAAQ,CAACC,EAAhB;EACD;;AA1B2B;;;mBAAjBhB,mBAAiBF;AAAA;;;QAAjBE;EAAiBiB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MAlC1BvB;MACEA;;MA8BFA;;;;MA9BQA;MAAAA","names":["i0","ctx_r0","DiscountComponent","constructor","discountService","discounts$","entities$","ngOnInit","getDiscounts","errorMessage","undefined","getAll","subscribe","_","error","trackByDiscount","index","discount","id","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Dell\\shopathome\\shopathome\\angular-app\\src\\app\\discounts.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { Discount } from './core';\r\nimport { Observable } from 'rxjs';\r\nimport { DiscountService } from './discount.service';\r\n\r\n@Component({\r\n  selector: 'app-discount',\r\n  template: `\r\n    <div class=\"container columns\">\r\n      <div *ngIf=\"discounts$ | async as discounts\" class=\"column is-8\">\r\n        <app-list-header\r\n          title=\"My Discounts\"\r\n          (refresh)=\"getDiscounts()\"\r\n          [showAdd]=\"showAdd\"\r\n        ></app-list-header>\r\n        <div *ngIf=\"errorMessage\">{{ errorMessage }}</div>\r\n        <div *ngIf=\"!discounts?.length && !errorMessage\">Loading data ...</div>\r\n        <ul class=\"list\">\r\n          <li\r\n            role=\"presentation\"\r\n            *ngFor=\"\r\n              let discount of discounts;\r\n              trackBy: trackByDiscount;\r\n              let i = index\r\n            \"\r\n          >\r\n            <div class=\"card\">\r\n              <div class=\"card-content\">\r\n                <div class=\"content discount-grid\">\r\n                  <label>Store:</label><span>{{ discount.store }}</span>\r\n                  <label>Discount:</label\r\n                  ><span>{{ discount.percentage }}%</span> <label>Code:</label\r\n                  ><span>{{ discount.code }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  `,\r\n})\r\nexport class DiscountComponent {\r\n  errorMessage: string;\r\n  showAdd = false;\r\n  discounts$: Observable<Discount[]>;\r\n\r\n  constructor(private discountService: DiscountService) {\r\n    this.discounts$ = discountService.entities$;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getDiscounts();\r\n  }\r\n\r\n  getDiscounts() {\r\n    this.errorMessage = undefined;\r\n    this.discountService.getAll().subscribe(\r\n      (_) => {\r\n        /*.. do nothing for success.. */\r\n      },\r\n      // (error: any) => (this.errorMessage = error.error.message),\r\n      (error: any) => (this.errorMessage = 'Unauthorized'),\r\n    );\r\n  }\r\n\r\n  trackByDiscount(index: number, discount: Discount): number {\r\n    return discount.id;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}