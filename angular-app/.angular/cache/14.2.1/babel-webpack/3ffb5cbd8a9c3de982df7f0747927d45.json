{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Dell/ShopaT-1/angular-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../shared/list-header.component\";\nimport * as i4 from \"../shared/modal.component\";\nimport * as i5 from \"./product-list.component\";\nimport * as i6 from \"./product-detail.component\";\n\nfunction ProductsComponent_div_3_app_product_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-product-list\", 8);\n    i0.ɵɵlistener(\"selected\", function ProductsComponent_div_3_app_product_list_1_Template_app_product_list_selected_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.select($event));\n    })(\"deleted\", function ProductsComponent_div_3_app_product_list_1_Template_app_product_list_deleted_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.askToDelete($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const products_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"products\", products_r1)(\"errorMessage\", ctx_r2.errorMessage);\n  }\n}\n\nfunction ProductsComponent_div_3_app_product_detail_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-product-detail\", 9);\n    i0.ɵɵlistener(\"unselect\", function ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_unselect_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.clear());\n    })(\"save\", function ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_save_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.save($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"product\", ctx_r3.selected);\n  }\n}\n\nfunction ProductsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, ProductsComponent_div_3_app_product_list_1_Template, 1, 2, \"app-product-list\", 6);\n    i0.ɵɵtemplate(2, ProductsComponent_div_3_app_product_detail_2_Template, 1, 1, \"app-product-detail\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.selected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selected);\n  }\n}\n\nexport class ProductsComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.message = '?';\n    this.showModal = false;\n    this.products$ = productService.entities$;\n  }\n\n  ngOnInit() {\n    this.getProducts();\n  }\n\n  add(product) {\n    this.productService.add(product);\n  }\n\n  askToDelete(product) {\n    this.productToDelete = product;\n    this.showModal = true;\n\n    if (this.productToDelete.name) {\n      this.message = `Would you like to delete ${this.productToDelete.name}?`;\n    }\n  }\n\n  clear() {\n    this.selected = null;\n  }\n\n  closeModal() {\n    this.showModal = false;\n  }\n\n  deleteProduct() {\n    this.closeModal();\n\n    if (this.productToDelete) {\n      this.productService.delete(this.productToDelete.id).subscribe(() => this.productToDelete = null);\n    }\n\n    this.clear();\n  }\n\n  enableAddMode() {\n    this.selected = {};\n  }\n\n  getProducts() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.errorMessage = undefined;\n\n      _this.productService.getAll().subscribe(_ => {\n        /*.. do nothing for success.. */\n      }, // (error: any) => (this.errorMessage = error.error.message),\n      error => _this.errorMessage = 'Unauthorized');\n\n      _this.clear();\n    })();\n  }\n\n  save(product) {\n    if (this.selected && this.selected.name) {\n      this.update(product);\n    } else {\n      this.add(product);\n    }\n  }\n\n  select(product) {\n    this.selected = product;\n  }\n\n  update(product) {\n    this.productService.update(product);\n  }\n\n}\n\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n};\n\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  decls: 6,\n  vars: 5,\n  consts: [[1, \"content-container\"], [\"title\", \"My List\", 3, \"add\", \"refresh\"], [1, \"columns\", \"is-multiline\", \"is-variable\"], [\"class\", \"column is-8\", 4, \"ngIf\"], [1, \"modal-product\", 3, \"message\", \"isOpen\", \"handleNo\", \"handleYes\"], [1, \"column\", \"is-8\"], [3, \"products\", \"errorMessage\", \"selected\", \"deleted\", 4, \"ngIf\"], [3, \"product\", \"unselect\", \"save\", 4, \"ngIf\"], [3, \"products\", \"errorMessage\", \"selected\", \"deleted\"], [3, \"product\", \"unselect\", \"save\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"app-list-header\", 1);\n      i0.ɵɵlistener(\"add\", function ProductsComponent_Template_app_list_header_add_1_listener() {\n        return ctx.enableAddMode();\n      })(\"refresh\", function ProductsComponent_Template_app_list_header_refresh_1_listener() {\n        return ctx.getProducts();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵtemplate(3, ProductsComponent_div_3_Template, 3, 2, \"div\", 3);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"app-modal\", 4);\n      i0.ɵɵlistener(\"handleNo\", function ProductsComponent_Template_app_modal_handleNo_5_listener() {\n        return ctx.closeModal();\n      })(\"handleYes\", function ProductsComponent_Template_app_modal_handleYes_5_listener() {\n        return ctx.deleteProduct();\n      });\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 3, ctx.products$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"message\", ctx.message)(\"isOpen\", ctx.showModal);\n    }\n  },\n  dependencies: [i2.NgIf, i3.ListHeaderComponent, i4.ModalComponent, i5.ProductListComponent, i6.ProductDetailComponent, i2.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["i0","ctx_r2","ProductsComponent","constructor","productService","products$","entities$","ngOnInit","getProducts","add","product","askToDelete","productToDelete","showModal","name","message","clear","selected","closeModal","deleteProduct","delete","id","subscribe","enableAddMode","errorMessage","undefined","getAll","_","error","save","update","select","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Dell\\ShopaT-1\\angular-app\\src\\app\\products\\products.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Product } from '../core';\r\nimport { ProductService } from './product.service';\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  template: `\r\n    <div class=\"content-container\">\r\n      <app-list-header\r\n        title=\"My List\"\r\n        (add)=\"enableAddMode()\"\r\n        (refresh)=\"getProducts()\"\r\n      ></app-list-header>\r\n      <div class=\"columns is-multiline is-variable\">\r\n        <div class=\"column is-8\" *ngIf=\"products$ | async as products\">\r\n          <app-product-list\r\n            *ngIf=\"!selected\"\r\n            [products]=\"products\"\r\n            [errorMessage]=\"errorMessage\"\r\n            (selected)=\"select($event)\"\r\n            (deleted)=\"askToDelete($event)\"\r\n          ></app-product-list>\r\n          <app-product-detail\r\n            *ngIf=\"selected\"\r\n            [product]=\"selected\"\r\n            (unselect)=\"clear()\"\r\n            (save)=\"save($event)\"\r\n          ></app-product-detail>\r\n        </div>\r\n      </div>\r\n\r\n      <app-modal\r\n        class=\"modal-product\"\r\n        [message]=\"message\"\r\n        [isOpen]=\"showModal\"\r\n        (handleNo)=\"closeModal()\"\r\n        (handleYes)=\"deleteProduct()\"\r\n      ></app-modal>\r\n    </div>\r\n  `,\r\n})\r\nexport class ProductsComponent implements OnInit {\r\n  errorMessage: string;\r\n  selected: Product;\r\n  products$: Observable<Product[]>;\r\n  message = '?';\r\n  productToDelete: Product;\r\n  showModal = false;\r\n\r\n  constructor(private productService: ProductService) {\r\n    this.products$ = productService.entities$;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getProducts();\r\n  }\r\n\r\n  add(product: Product) {\r\n    this.productService.add(product);\r\n  }\r\n\r\n  askToDelete(product: Product) {\r\n    this.productToDelete = product;\r\n    this.showModal = true;\r\n    if (this.productToDelete.name) {\r\n      this.message = `Would you like to delete ${this.productToDelete.name}?`;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.selected = null;\r\n  }\r\n\r\n  closeModal() {\r\n    this.showModal = false;\r\n  }\r\n\r\n  deleteProduct() {\r\n    this.closeModal();\r\n    if (this.productToDelete) {\r\n      this.productService\r\n        .delete(this.productToDelete.id)\r\n        .subscribe(() => (this.productToDelete = null));\r\n    }\r\n    this.clear();\r\n  }\r\n\r\n  enableAddMode() {\r\n    this.selected = <any>{};\r\n  }\r\n\r\n  async getProducts() {\r\n    this.errorMessage = undefined;\r\n    this.productService.getAll().subscribe(\r\n      (_) => {\r\n        /*.. do nothing for success.. */\r\n      },\r\n      // (error: any) => (this.errorMessage = error.error.message),\r\n      (error: any) => (this.errorMessage = 'Unauthorized'),\r\n    );\r\n    this.clear();\r\n  }\r\n\r\n  save(product: Product) {\r\n    if (this.selected && this.selected.name) {\r\n      this.update(product);\r\n    } else {\r\n      this.add(product);\r\n    }\r\n  }\r\n\r\n  select(product: Product) {\r\n    this.selected = product;\r\n  }\r\n\r\n  update(product: Product) {\r\n    this.productService.update(product);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}