{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nexports.__esModule = true;\nexports.ProductsComponent = void 0;\n\nvar i0 = require(\"@angular/core\");\n\nvar i1 = require(\"./product.service\");\n\nvar i2 = require(\"@angular/common\");\n\nvar i3 = require(\"../shared/list-header.component\");\n\nvar i4 = require(\"../shared/modal.component\");\n\nvar i5 = require(\"./product-list.component\");\n\nvar i6 = require(\"./product-detail.component\");\n\nfunction ProductsComponent_div_3_app_product_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-product-list\", 8);\n    i0.ɵɵlistener(\"selected\", function ProductsComponent_div_3_app_product_list_1_Template_app_product_list_selected_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.select($event));\n    })(\"deleted\", function ProductsComponent_div_3_app_product_list_1_Template_app_product_list_deleted_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.askToDelete($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var products_r1 = i0.ɵɵnextContext().ngIf;\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"products\", products_r1)(\"errorMessage\", ctx_r2.errorMessage);\n  }\n}\n\nfunction ProductsComponent_div_3_app_product_detail_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-product-detail\", 9);\n    i0.ɵɵlistener(\"unselect\", function ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_unselect_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      var ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.clear());\n    })(\"save\", function ProductsComponent_div_3_app_product_detail_2_Template_app_product_detail_save_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      var ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.save($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"product\", ctx_r3.selected);\n  }\n}\n\nfunction ProductsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, ProductsComponent_div_3_app_product_list_1_Template, 1, 2, \"app-product-list\", 6);\n    i0.ɵɵtemplate(2, ProductsComponent_div_3_app_product_detail_2_Template, 1, 1, \"app-product-detail\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.selected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selected);\n  }\n}\n\nvar ProductsComponent =\n/** @class */\nfunction () {\n  function ProductsComponent(productService) {\n    this.productService = productService;\n    this.message = '?';\n    this.showModal = false;\n    this.products$ = productService.entities$;\n  }\n\n  ProductsComponent.prototype.ngOnInit = function () {\n    this.getProducts();\n  };\n\n  ProductsComponent.prototype.add = function (product) {\n    this.productService.add(product);\n  };\n\n  ProductsComponent.prototype.askToDelete = function (product) {\n    this.productToDelete = product;\n    this.showModal = true;\n\n    if (this.productToDelete.name) {\n      this.message = \"Would you like to delete \".concat(this.productToDelete.name, \"?\");\n    }\n  };\n\n  ProductsComponent.prototype.clear = function () {\n    this.selected = null;\n  };\n\n  ProductsComponent.prototype.closeModal = function () {\n    this.showModal = false;\n  };\n\n  ProductsComponent.prototype.deleteProduct = function () {\n    var _this = this;\n\n    this.closeModal();\n\n    if (this.productToDelete) {\n      this.productService[\"delete\"](this.productToDelete.id).subscribe(function () {\n        return _this.productToDelete = null;\n      });\n    }\n\n    this.clear();\n  };\n\n  ProductsComponent.prototype.enableAddMode = function () {\n    this.selected = {};\n  };\n\n  ProductsComponent.prototype.getProducts = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        this.errorMessage = undefined;\n        this.productService.getAll().subscribe(function (_) {\n          /*.. do nothing for success.. */\n        }, // (error: any) => (this.errorMessage = error.error.message),\n        function (error) {\n          return _this.errorMessage = 'Unauthorized';\n        });\n        this.clear();\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  };\n\n  ProductsComponent.prototype.save = function (product) {\n    if (this.selected && this.selected.name) {\n      this.update(product);\n    } else {\n      this.add(product);\n    }\n  };\n\n  ProductsComponent.prototype.select = function (product) {\n    this.selected = product;\n  };\n\n  ProductsComponent.prototype.update = function (product) {\n    this.productService.update(product);\n  };\n\n  ProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n    return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n  };\n\n  ProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductsComponent,\n    selectors: [[\"app-products\"]],\n    decls: 6,\n    vars: 5,\n    consts: [[1, \"content-container\"], [\"title\", \"My List\", 3, \"add\", \"refresh\"], [1, \"columns\", \"is-multiline\", \"is-variable\"], [\"class\", \"column is-8\", 4, \"ngIf\"], [1, \"modal-product\", 3, \"message\", \"isOpen\", \"handleNo\", \"handleYes\"], [1, \"column\", \"is-8\"], [3, \"products\", \"errorMessage\", \"selected\", \"deleted\", 4, \"ngIf\"], [3, \"product\", \"unselect\", \"save\", 4, \"ngIf\"], [3, \"products\", \"errorMessage\", \"selected\", \"deleted\"], [3, \"product\", \"unselect\", \"save\"]],\n    template: function ProductsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"app-list-header\", 1);\n        i0.ɵɵlistener(\"add\", function ProductsComponent_Template_app_list_header_add_1_listener() {\n          return ctx.enableAddMode();\n        })(\"refresh\", function ProductsComponent_Template_app_list_header_refresh_1_listener() {\n          return ctx.getProducts();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtemplate(3, ProductsComponent_div_3_Template, 3, 2, \"div\", 3);\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"app-modal\", 4);\n        i0.ɵɵlistener(\"handleNo\", function ProductsComponent_Template_app_modal_handleNo_5_listener() {\n          return ctx.closeModal();\n        })(\"handleYes\", function ProductsComponent_Template_app_modal_handleYes_5_listener() {\n          return ctx.deleteProduct();\n        });\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 3, ctx.products$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"message\", ctx.message)(\"isOpen\", ctx.showModal);\n      }\n    },\n    dependencies: [i2.NgIf, i3.ListHeaderComponent, i4.ModalComponent, i5.ProductListComponent, i6.ProductDetailComponent, i2.AsyncPipe],\n    encapsulation: 2\n  });\n  return ProductsComponent;\n}();\n\nexports.ProductsComponent = ProductsComponent;","map":{"version":3,"mappings":"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","names":["i0","ctx_r2","productService","products$","entities$","ProductsComponent","getProducts","product","add","productToDelete","showModal","name","message","selected","closeModal","id","subscribe","_this","clear","errorMessage","undefined","getAll","_","error","update","selectors","decls","vars","consts","template","ctx","exports"],"sourceRoot":"","sources":["C:\\Users\\Dell\\shopathome\\shopathome\\angular-app\\src\\app\\products\\products.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Product } from '../core';\r\nimport { ProductService } from './product.service';\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  template: `\r\n    <div class=\"content-container\">\r\n      <app-list-header\r\n        title=\"My List\"\r\n        (add)=\"enableAddMode()\"\r\n        (refresh)=\"getProducts()\"\r\n      ></app-list-header>\r\n      <div class=\"columns is-multiline is-variable\">\r\n        <div class=\"column is-8\" *ngIf=\"products$ | async as products\">\r\n          <app-product-list\r\n            *ngIf=\"!selected\"\r\n            [products]=\"products\"\r\n            [errorMessage]=\"errorMessage\"\r\n            (selected)=\"select($event)\"\r\n            (deleted)=\"askToDelete($event)\"\r\n          ></app-product-list>\r\n          <app-product-detail\r\n            *ngIf=\"selected\"\r\n            [product]=\"selected\"\r\n            (unselect)=\"clear()\"\r\n            (save)=\"save($event)\"\r\n          ></app-product-detail>\r\n        </div>\r\n      </div>\r\n\r\n      <app-modal\r\n        class=\"modal-product\"\r\n        [message]=\"message\"\r\n        [isOpen]=\"showModal\"\r\n        (handleNo)=\"closeModal()\"\r\n        (handleYes)=\"deleteProduct()\"\r\n      ></app-modal>\r\n    </div>\r\n  `,\r\n})\r\nexport class ProductsComponent implements OnInit {\r\n  errorMessage: string;\r\n  selected: Product;\r\n  products$: Observable<Product[]>;\r\n  message = '?';\r\n  productToDelete: Product;\r\n  showModal = false;\r\n\r\n  constructor(private productService: ProductService) {\r\n    this.products$ = productService.entities$;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getProducts();\r\n  }\r\n\r\n  add(product: Product) {\r\n    this.productService.add(product);\r\n  }\r\n\r\n  askToDelete(product: Product) {\r\n    this.productToDelete = product;\r\n    this.showModal = true;\r\n    if (this.productToDelete.name) {\r\n      this.message = `Would you like to delete ${this.productToDelete.name}?`;\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.selected = null;\r\n  }\r\n\r\n  closeModal() {\r\n    this.showModal = false;\r\n  }\r\n\r\n  deleteProduct() {\r\n    this.closeModal();\r\n    if (this.productToDelete) {\r\n      this.productService\r\n        .delete(this.productToDelete.id)\r\n        .subscribe(() => (this.productToDelete = null));\r\n    }\r\n    this.clear();\r\n  }\r\n\r\n  enableAddMode() {\r\n    this.selected = <any>{};\r\n  }\r\n\r\n  async getProducts() {\r\n    this.errorMessage = undefined;\r\n    this.productService.getAll().subscribe(\r\n      (_) => {\r\n        /*.. do nothing for success.. */\r\n      },\r\n      // (error: any) => (this.errorMessage = error.error.message),\r\n      (error: any) => (this.errorMessage = 'Unauthorized'),\r\n    );\r\n    this.clear();\r\n  }\r\n\r\n  save(product: Product) {\r\n    if (this.selected && this.selected.name) {\r\n      this.update(product);\r\n    } else {\r\n      this.add(product);\r\n    }\r\n  }\r\n\r\n  select(product: Product) {\r\n    this.selected = product;\r\n  }\r\n\r\n  update(product: Product) {\r\n    this.productService.update(product);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script"}